# Система управления объявлениями для модерации

Учебный проект по заданию **«Frontend trainee assignment, autumn 2025» (Avito)**.  
Это приложение для симуляции действий модерации объявлений: просмотра списка, карточки объявления, принятия решений модератора и просмотра статистики.

---

## Технологический стек

### Основной стек

- **React 18** — UI-библиотека.
- **TypeScript** — типизация.
- **Vite 7** — сборка и dev-сервер.
- **React Router v7** — маршрутизация и маршрутизатор с `createBrowserRouter`, `loader`, `errorElement`.
- **Ant Design v5** — UI-компоненты (Card, Button, Input, Select, Tag, Modal, Alert, Pagination и др.).
- **Effector + effector-react** — стейт-менеджмент для списка объявлений, фильтров и пагинации.
- **Fetch API** — HTTP-запросы к API (в некоторых местах axios использован в роутере).

### Тесты и качество кода

- **Vitest** — тестовый раннер.
- **React Testing Library** — юнит/интеграционные тесты компонентов и страниц.
- **@testing-library/jest-dom** — дополнительные матчер-функции для assert’ов.
- **jsdom** — окружение для тестов.
- **ESLint + typescript-eslint** — линтинг и базовые правила качества кода.

---

## Настройки окружения (.env)

Перейдите в папку `frontend` и создайте файл `.env` с переменными окружения:

```bash
VITE_API_URL_BACK='url сервера'
```

в исходном проекте `url сервера` — `http://localhost:3001`

---
## Запуск проекта


```bash
git clone https://github.com/Anastasia-Papchenko/advertisement-moderation.git
cd advertisement-moderation


# установка зависимостей
cd frontend
npm install
cd ..
cd backend
npm install

# запуск можно произвести двумя способами
# 1) Запуск фронтенда и бэкенда в отдельных терминалах
cd backend
npm start
# в другом терминале
cd frontend
npm run dev

# 2) Запуск фронтенда и бэкенда вместе 
# после установки зависимостей отдельно в frontend и backend
# устанавливаем зависимости в корне проекта
npm install
npm run dev
```

Frontend-приложение будет доступно по адресу: `http://localhost:5173`


Backend-сервет будет доступен по адресу: `http://localhost:3001`

---

## Функциональность

### Страницы

- `/list` — список объявлений с фильтрами, сортировкой и постраничной навигацией.
- `/item/:id` — подробная страница объявления с действиями модератора.
- `/stats` — страница статистики по модерации.
- `*` — страница ошибки (ErrorPage) для всех неизвестных маршрутов.

### Список объявлений (`/list`)

- Загрузка объявлений с бэкенда (по умолчанию постранично, по 10 штук).
- Фильтры:
  - по статусу (множественный выбор: «На модерации», «Одобрено», «Отклонено»);
  - по категории;
  - по диапазону цен (мин/макс);
  - по названию объявления (поиск по подстроке).
- Сортировка:
  - по дате создания (новые/старые);
  - по цене (возрастание/убывание);
  - по приоритету (обычный/срочный).
- Постраничная навигация (pagination).
- Выбор объявлений:
  - чекбокс на карточке;
  - возможность выделить несколько объявлений;
  - счётчик выбранных объявлений;
  - кнопки:
    - «Выбрать все на странице»;
    - «Снять выбор».
- Отображение состояний:
  - загрузка (спиннер);
  - ошибка загрузки (Alert);
  - пустой список (Empty).

### Карточка объявления (`/item/:id`)

- Загрузка и отображение подробных данных объявления:
  - базовая информация (название, цена, категория, описание, статус, приоритет);
  - изображения;
  - продавец (имя, рейтинг, количество объявлений, дата регистрации);
  - характеристики товара;
  - история модерации.
- Навигация:
  - кнопки «Предыдущее» и «Следующее» для перехода между объявлениями.
- Действия модератора:
  - **Одобрить** объявление;
  - **Отклонить** с выбором причины;
  - **Отправить на доработку** с выбором причины.
- Модальное окно с причинами (компонент `ModalWindow`):
  - список предустановленных причин (константа `REJECTION_REASONS`);
  - вариант «Другое» с текстовым полем для произвольной причины;
  - валидация (нельзя отправить без выбранной/заполненной причины).
- Обработка состояний:
  - загрузка объявления (Spin);
  - ошибка загрузки/действия (Alert);
  - блокировка кнопок на время выполнения запроса.

### Страница статистики (`/stats`)

Страница получает агрегированные данные с бэкенда и показывает:

- сводку по модерации за период (например, за неделю): количество одобренных, отклонённых, отправленных на доработку и т.п.;
- активность модерации по дням (график);
- распределение решений (доли approve/reject/requestChanges);
- распределение объявлений по категориям.

Для всех запросов обрабатываются:

- состояния загрузки (Spin),
- ошибки (Alert),
- пустые данные (аккуратные «пустые» состояния).

### Страница ошибки (ErrorPage)

- Отдельная страница для:
  - неизвестных роутов;
  - ошибок загрузки данных в роутере.
- Показывает сообщение и ссылку/кнопку возврата к списку объявлений.

---

## Архитектура и структура проекта

Основная структура `src`:

```text
src/
  main.tsx              # Точка входа, создание роутера и RouterProvider
  index.module.css      # Глобальные стили

  components/
    Filters/            # Панель фильтров списка объявлений
      Filters.tsx
      Filters.test.tsx
      FiltersUtils.ts
    ProductCard/        # Карточка объявления на странице списка
      ProductCard.tsx
      ProductCard.module.css
      ProductCard.test.tsx
      ProductCardUtils.ts
    ModalWindow/        # Универсальное модальное окно для решений модерации
      ModalWindow.tsx
      ModalWindow.test.tsx

  pages/
    List/               # Страница списка объявлений
      List.tsx
      List.module.css
      List.test.tsx
    Item/               # Страница карточки объявления
      Item.tsx
      Item.module.css
      Item.test.tsx
      ItemUtils.ts
    Stats/              # Страница со статистикой
      Stats.tsx
      Stats.module.css
      Stats.test.tsx
      StatsUtils.ts
    ErrorPage/          # Страница ошибки / 404
      ErrorPage.tsx
      ErrorPage.module.css
      ErrorPage.test.tsx

  models/
    ads/
      model.ts          # Effector-модель: список объявлений, фильтры, пагинация

  types/                # Общие типы доменной модели и пропсов компонентов
    filters.types.ts
    Item.types.ts
    modal_window.types.ts
    model.types.ts
    product_card.types.ts
    stats.types.ts

  utils/
    filtersUrl.ts       # Работа с синхронизацией фильтров и URL-параметров

  test/
    setupTests.ts       # Настройка Vitest + RTL + jest-dom

```
